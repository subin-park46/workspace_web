<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Document</title>

<style>
	#colorbox{
		width: 320px;
		height: 320px;
		position: relative;
	}
	#red, #yellow, #blue, #green{
		width: 150px;
		height: 150px;
		border: 1px solid black;
        position: absolute;
	}
	#yellow{left: 160px;}
	#blue{top: 160px;}
	#green{top: 160px; left: 160px;}
</style>

<script>
	// check -> checked 속성의 값 (true / false)
	function allselect(check){
		var chks = document.getElementsByName("chk");
		for(var i = 0; i < chks.length; i++) {
			chks[i].checked = check;
		}
	}
	
	function sel() {
		// chk라는 이름을 가진 모든 checkbox 가져온다.
		var chks = document.getElementsByName("chk");
		
		for(var i = 0; i < chks.length; i++) {
			// 만일 chk들 중에 체크된 element가 있다면,
			if(chks[i].checked){
				// 체크된 chk.value값을 Id로 가지는 요소의 배경색을 chk.value값으로 바꾸자.
				document.getElementById(chks[i].value).style.background = chks[i].value;
			} else {
				document.getElementById(chks[i].value).style.background = "";
			}
		}
	}
	
	function clearDivs() {
		var divs = document.querySelectorAll("#colorbox > div");
		
		for(var i = 0; i < divs.length; i++) {
            divs[i].style.backgroundColor = "";
		}

        allselect(false);
        document.getElementsByName("all")[0].checked = false;
	}

</script>

</head>
<body>

	<div id="colorbox">
		<div id="red">red</div>
		<div id="yellow">yellow</div>
		<div id="blue">blue</div>
		<div id="green">green</div>
	</div>
	
	<div>
		<form>
			<input type="checkbox" name="all" onclick="allselect(this.checked);">전체선택<br>
			<input type="checkbox" name="chk" value="red">빨강<br>
			<input type="checkbox" name="chk" value="yellow">노랑<br>
			<input type="checkbox" name="chk" value="blue">파랑<br>
			<input type="checkbox" name="chk" value="green">초록<br>
			
			<input type="button" value="선택" onclick="sel();">
			<input type="button" value="clear" onclick="clearDivs();">
		</form>
	</div>

</body>
</html>